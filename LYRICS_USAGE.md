# 歌词功能使用说明

## 🎵 功能概述

已成功实现完整的歌词解析和显示功能，支持标准LRC格式和逐字歌词。

## 📁 已创建的文件

### 核心服务
- `lib/services/lyrics_service.dart` - 歌词解析服务，包含：
  - LRC文件解析
  - 逐字歌词处理
  - 歌词查找功能
  - 时间同步算法

### 用户界面
- `lib/pages/lyrics_page.dart` - 歌词显示页面，支持：
  - 实时歌词同步
  - 逐字高亮显示
  - 滚动跟随播放进度
  - 深色/浅色主题适配

### 集成修改
- `lib/pages/player_page.dart` - 添加歌词查看按钮
- `lib/services/services.dart` - 导出歌词服务

### 文档和测试
- `LYRICS_GUIDE.md` - 完整功能文档
- `test/simple_lyrics_test.dart` - 基础功能测试

## 🎯 使用方法

### 1. 查看歌词
1. 播放任意歌曲
2. 在播放器页面点击歌词图标 (🎵)
3. 进入歌词页面查看实时歌词

### 2. 歌词获取方式
1. **音频文件元数据**（推荐）：歌词直接嵌入在音频文件（MP3、FLAC等）的元数据中
2. **LRC文件**：与音频文件同名的`.lrc`文件

### 3. 歌词文件命名
如果使用LRC文件，会自动查找以下命名格式：
- `{song_id}.lrc` - 使用歌曲ID
- `{title} - {artist}.lrc` - 使用歌曲名和艺术家

### 3. LRC格式支持

#### 标准格式
```
[00:10.00]这是歌词第一行
[00:20.50]这是歌词第二行
[01:30.00]这是歌词第三行
```

#### 逐字歌词格式
```
[00:10.00]<0,100>这<200,300>是<400,500>逐<600,700>字<800,900>歌<1000,1100>词
```

## 🔧 技术特性

- ✅ 支持UTF-8编码
- ✅ 自动检测歌词文件
- ✅ 实时时间同步
- ✅ 逐字高亮动画
- ✅ 平滑滚动效果
- ✅ 响应式设计

## 📱 测试验证

已验证功能：
- 基础LRC解析 ✓
- 逐字歌词解析 ✓
- 真实歌词文件测试 ✓
- 时间索引计算 ✓
- 文件查找功能 ✓

## 🚀 下一步

应用正在启动中，你可以：
1. 播放一首歌曲
2. 点击播放器中的歌词图标
3. 体验完整的歌词显示功能

歌词文件已存在于项目根目录：
- 2713560379.lrc (flos)
- 1864931358.lrc (携帯恋話)  
- 1864932183.lrc (悔やむと書いてミライ)